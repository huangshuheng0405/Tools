åœ¨ Vue Router ä¸­ï¼Œ`query` å’Œ `params` æ˜¯ä¸¤ç§æœ€å¸¸ç”¨çš„ä¼ å‚æ–¹å¼ã€‚å®ƒä»¬æœ€ç›´è§‚çš„åŒºåˆ«å°±åƒæ˜¯ **GET è¯·æ±‚**ä¸ **POST è¯·æ±‚**åœ¨åœ°å€æ è¡¨ç°ä¸Šçš„å·®å¼‚ã€‚

## 1. æ ¸å¿ƒåŒºåˆ«å¯¹ç…§è¡¨

| ç‰¹æ€§         | Query ä¼ å‚                     | Params ä¼ å‚                                 |
| ------------ | ------------------------------ | ------------------------------------------- |
| **è¡¨ç°å½¢å¼** | URL åé¢å¸¦å‚æ•°ï¼š`/path?id=123` | URL è·¯å¾„çš„ä¸€éƒ¨åˆ†ï¼š`/path/123`               |
| **å®šä¹‰æ–¹å¼** | ä¸éœ€è¦é…ç½®è·¯ç”±è·¯å¾„ï¼Œç›´æ¥ä¼      | éœ€è¦åœ¨è·¯ç”±é…ç½®ä¸­å®šä¹‰å ä½ç¬¦ï¼ˆå¦‚ `:id`ï¼‰      |
| **åˆ·æ–°ä¸¢å¤±** | **ä¸ä¼š**ä¸¢å¤±ï¼ˆå‚æ•°åœ¨ URL ä¸­ï¼‰  | **ä¼š**ä¸¢å¤±ï¼ˆå¦‚æœä¸é…åˆåŠ¨æ€è·¯ç”±åŒ¹é…ï¼‰        |
| **å±æ€§è·å–** | `$route.query`                 | `$route.params`                             |
| **è·³è½¬æ–¹å¼** | `name` æˆ– `path` å‡å¯          | å¿…é¡»é€šè¿‡ `name` è·³è½¬ï¼ˆVue Router 4.x é™åˆ¶ï¼‰ |

---

## 2. è¯¦ç»†æ‹†è§£

### Query ä¼ å‚ï¼ˆç±»ä¼¼æœç´¢ï¼‰

`query` ä¼ é€’çš„å‚æ•°ä¼šæ˜¾ç¤ºåœ¨åœ°å€æ ï¼Œé€‚åˆâ€œéæ•æ„Ÿã€å¯åˆ†äº«â€çš„æ•°æ®ï¼Œæ¯”å¦‚æœç´¢å…³é”®å­—ã€åˆ†é¡µé¡µç ç­‰ã€‚

- **è·³è½¬å†™æ³•**ï¼š

```javascript
// è·³è½¬ååœ°å€ï¼š/home?id=1&name=jack
router.push({ path: '/home', query: { id: 1, name: 'jack' } })
```

- **æ¥æ”¶å‚æ•°**ï¼š

```javascript
console.log(this.$route.query.id)
```

### Params ä¼ å‚ï¼ˆç±»ä¼¼è¯¦æƒ…é¡µï¼‰

`params` é€šå¸¸ç”¨äºä¼ é€’ç‰¹å®šçš„æ ‡è¯†ç¬¦ã€‚

> **æ³¨æ„ï¼ˆVue Router 4.x é‡è¦å˜æ›´ï¼‰ï¼š** > åœ¨ Vue 3 ä¸­ï¼Œå¦‚æœä½ ç›´æ¥ä½¿ç”¨ `params` ä¼ é€’å†…å­˜ä¸­çš„å¯¹è±¡ä¸”ä¸åœ¨è·¯å¾„ä¸­å®šä¹‰å®ƒï¼ˆå³éšå¼ä¼ å‚ï¼‰ï¼Œåˆ·æ–°é¡µé¢åå‚æ•°**ä¼šæ¶ˆå¤±**ã€‚å®˜æ–¹æ¨èä½¿ç”¨åŠ¨æ€è·¯ç”±åŒ¹é…æˆ–çŠ¶æ€ç®¡ç†ï¼ˆPinia/Vuexï¼‰æ›¿ä»£ã€‚

- **è·¯ç”±å®šä¹‰**ï¼š

```javascript
{ path: '/user/:id', name: 'User', component: User }

```

- **è·³è½¬å†™æ³•**ï¼š

```javascript
// è·³è½¬ååœ°å€ï¼š/user/123
router.push({ name: 'User', params: { id: 123 } })
```

- **æ¥æ”¶å‚æ•°**ï¼š

```javascript
console.log(this.$route.params.id)
```

---

## 3. ä»€ä¹ˆæ—¶å€™ç”¨å“ªä¸ªï¼Ÿ

1. **ä½¿ç”¨ Query çš„åœºæ™¯**ï¼š

- éœ€è¦åšâ€œæœç´¢ç»“æœé¡µâ€çš„åˆ†äº«ã€‚
- å¤šä¸ªå¯é€‰çš„ç­›é€‰æ¡ä»¶ï¼ˆå¦‚ `?color=red&size=m`ï¼‰ã€‚
- æ™®é€šçš„é¡µé¢è·³è½¬ã€‚

2. **ä½¿ç”¨ Params çš„åœºæ™¯**ï¼š

- å…¸å‹çš„â€œè¯¦æƒ…é¡µâ€ï¼ˆå¦‚å•†å“è¯¦æƒ… `/product/1001`ï¼‰ã€‚
- å‚æ•°æ˜¯è·¯ç”±çš„ä¸€éƒ¨åˆ†ï¼Œå¯¹ SEO æ›´å‹å¥½ã€‚
- çœ‹èµ·æ¥æ›´ç®€æ´ã€ç¾è§‚çš„ RESTful é£æ ¼ã€‚

---

### é¿å‘å°è´´å£« ğŸ’¡

- å¦‚æœä½ ä½¿ç”¨äº† `path` è¿›è¡Œè·³è½¬ï¼Œ`params` ä¼šè¢«å¿½ç•¥ï¼Œå¿…é¡»ä½¿ç”¨ `name`ã€‚
- å¦‚æœä½ çš„ `params` æ²¡åœ¨è·¯ç”± path é‡Œé…ç½® `:id`ï¼Œé‚£ä¹ˆå®ƒå°±æ˜¯â€œä¸´æ—¶å·¥â€ï¼Œåˆ·æ–°é¡µé¢å°±æ²¡äº†ã€‚

## è§£å†³ Vue Router 4.x åˆ·æ–°å `params` ä¸¢å¤±é—®é¢˜

è¿™æ˜¯ä¸€ä¸ªéå¸¸å®ç”¨çš„éœ€æ±‚ã€‚åœ¨ Vue Router 4.x ä¸­ï¼Œéè·¯å¾„å±æ€§çš„ `params` ç¡®å®ä¼šåœ¨åˆ·æ–°åä¸¢å¤±ã€‚

ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬å¯ä»¥åˆ©ç”¨ **`localStorage`** æˆ– **`sessionStorage`**ï¼ˆæ¨è `sessionStorage`ï¼Œå› ä¸ºå®ƒçš„ç”Ÿå‘½å‘¨æœŸé€šå¸¸ä¸å½“å‰æ ‡ç­¾é¡µä¸€è‡´ï¼‰è¿›è¡Œæ•°æ®æŒä¹…åŒ–ã€‚

### æ–¹æ¡ˆï¼šä½¿ç”¨ `sessionStorage` å®ˆå«å‚æ•°

è¿™é‡Œæˆ‘ç”¨ **Vue 3 + Composition API** ä¸ºä¾‹ï¼Œä¸ºä½ å±•ç¤ºå¦‚ä½•å°è£…è¿™å¥—é€»è¾‘ã€‚

### 1. å‘èµ·è·³è½¬ï¼šå­˜å‚¨æ•°æ®å¹¶è·³è½¬

åœ¨å‘é€æ–¹ï¼Œæˆ‘ä»¬åœ¨è·³è½¬å‰å…ˆå°†æ•°æ®å­˜å…¥æœ¬åœ°ã€‚

```javascript
import { useRouter } from 'vue-router'

const router = useRouter()

const goToDetail = (item) => {
  // 1. å…ˆå­˜å…¥æœ¬åœ°å­˜å‚¨ï¼ˆè½¬æ¢ä¸º JSON å­—ç¬¦ä¸²ï¼‰
  sessionStorage.setItem('current_params', JSON.stringify(item))

  // 2. è·³è½¬
  router.push({
    name: 'Detail',
    params: { id: item.id } // å³ä½¿è¿™é‡Œä¼ äº†ï¼Œåˆ·æ–°åä¹Ÿä¼šä¸¢ï¼Œæ‰€ä»¥æˆ‘ä»¬é ä¸Šé¢é‚£è¡Œ
  })
}
```

### 2. æ¥æ”¶é¡µé¢ï¼šè¯»å–å¹¶æ¢å¤æ•°æ®

åœ¨æ¥æ”¶æ–¹é¡µé¢ï¼Œæˆ‘ä»¬éœ€è¦åœ¨ç»„ä»¶åŠ è½½æ—¶åˆ¤æ–­ `params` æ˜¯å¦ä¸ºç©ºã€‚å¦‚æœæ˜¯ç©ºçš„ï¼ˆè¯´æ˜åˆ·æ–°äº†ï¼‰ï¼Œå°±ä»æœ¬åœ°å­˜å‚¨é‡Œæ‹¿ã€‚

```vue
<template>
  <div v-if="detailData">
    <h2>è¯¦æƒ…é¡µ - {{ detailData.name }}</h2>
    <p>ID: {{ detailData.id }}</p>
    <p>æè¿°: {{ detailData.description }}</p>
  </div>
</template>

<script setup>
import { ref, onMounted } from 'vue'
import { useRoute } from 'vue-router'

const route = useRoute()
const detailData = ref(null)

onMounted(() => {
  // 1. å°è¯•ä»å½“å‰è·¯ç”±å‚æ•°è·å– (ç¬¬ä¸€æ¬¡è·³è½¬è¿‡æ¥æ—¶æœ‰æ•ˆ)
  const paramsData = route.params.info

  if (paramsData) {
    // å¦‚æœå­˜åœ¨ï¼Œç›´æ¥èµ‹å€¼å¹¶å­˜ä¸€ä»½åˆ°æœ¬åœ°å¤‡ç”¨
    detailData.value =
      typeof paramsData === 'string' ? JSON.parse(paramsData) : paramsData
    sessionStorage.setItem('current_params', JSON.stringify(detailData.value))
  } else {
    // 2. å¦‚æœåˆ·æ–°äº†ï¼Œä»æœ¬åœ°å­˜å‚¨æ¢å¤
    const savedData = sessionStorage.getItem('current_params')
    if (savedData) {
      detailData.value = JSON.parse(savedData)
      console.log('æ•°æ®å·²ä»æœ¬åœ°å­˜å‚¨æ¢å¤')
    }
  }
})
</script>
```

---

### 3. è¿›é˜¶ï¼šæ›´å¥½çš„â€œå¹²å‡€â€åšæ³•

å¦‚æœä½ è§‰å¾—æ¯ä¸ªé¡µé¢éƒ½å†™è¿™æ®µé€»è¾‘å¤ªéº»çƒ¦ï¼Œå¯ä»¥ä½¿ç”¨ **è·¯ç”±å®ˆå« (Navigation Guards)** ç»Ÿä¸€å¤„ç†ã€‚

### åœ¨ `router/index.js` ä¸­æ‹¦æˆªï¼š

```javascript [router/index.js]
router.beforeEach((to, from, next) => {
  // å¦‚æœæ˜¯å»è¯¦æƒ…é¡µä¸”æºå¸¦äº† params
  if (to.name === 'Detail' && Object.keys(to.params).length > 0) {
    localStorage.setItem('temp_params', JSON.stringify(to.params))
  }
  next()
})
```

---

### ğŸ’¡ æ ¸å¿ƒå»ºè®®

- ä½¿ç”¨ `sessionStorage`ï¼šç›¸æ¯” `localStorage`ï¼Œå®ƒåœ¨ä½ å…³é—­æµè§ˆå™¨æ ‡ç­¾é¡µæ—¶ä¼šè‡ªåŠ¨æ¸…é™¤ï¼Œä¸ä¼šç•™ä¸‹å†—ä½™çš„åƒåœ¾æ•°æ®ã€‚
- **ä¼˜å…ˆè€ƒè™‘çŠ¶æ€ç®¡ç†**ï¼šå¦‚æœä½ çš„é¡¹ç›®è¾ƒå¤§ï¼Œå»ºè®®ç›´æ¥ä½¿ç”¨ **Pinia**ã€‚æŠŠæ•°æ®å­˜åœ¨ Pinia é‡Œï¼Œå†é…åˆ `pinia-plugin-persistedstate` æ’ä»¶ï¼Œå¯ä»¥å®ç°å®Œå…¨è‡ªåŠ¨åŒ–çš„æŒä¹…åŒ–ï¼Œä»£ç ä¼šæ•´æ´å¾—å¤šã€‚
